<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <meta name="apple-mobile-web-app-cabaple" content="yes"> 
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    
	<title>History of Helsinki buildings</title>
	
<!-- Mapbox script -->
	<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.4/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.12.4/mapbox-gl.css' rel='stylesheet' />
	
<!-- Bootstarp scriptit -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
	 
<!--own styles--> 
	<link rel="stylesheet" href="styles.css">	
	<link href="nouislider.min.css" rel="stylesheet">
		
 <style>
    html, body {
		overflow:hidden;
		height:100%;
	}
	
	#map {
		width:100%;
		height:100%;
		position:absolute;
		left:0;
	}
	
	#header {
		background-color:rgba(255, 255, 255, 0.7);
		color:black;
		text-align:center;
		font-family: "Lucida Sans Unicode", Lucida Grande, sans-serif;
		position:absolute;
		bottom: 0;
		z-index:50;
		right:0;
		left:0;
	}
	
	.sidebar {
		position:absolute;
		top:0; left:0; width:250px;
		bottom:0;
		overflow-x:auto;
		background-color:teal;
		margin:0;
		padding:5px;
		font-size:15px;
		border-radius:10px;
		text-align:center;
		z-index:80;
	} 
  
  
	.btn {
		margin:3px;
	} 
	
	.btn-round { 
		font-weight: bold;
		width: 19px;
		height: 19px;
		text-align: center;
		padding: 1px 0;
		font-size: 13px;
		line-height: 0.1;
		border-radius: 30px;
	}
	
	#menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        bottom: 10px;
        left: 10px;
        border-radius: 3px;
        width: 120px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Open Sans', sans-serif;
    }

    #menu a {
        font-size: 13px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 0;
        padding: 10px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.25);
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: #f8f8f8;
        color: #404040;
    }

    #menu a.active {
        background-color: #3887be;
        color: #ffffff;
    }

    #menu a.active:hover {
        background: #3074a4;
    }
	
	#info {
        display: block;
        position: relative;
        margin: 0px auto;
        width: 50%;
        padding: 10px;
        border: none;
        border-radius: 3px;
        font-size: 12px;
        text-align: center;
        color: #222;
        background: #fff;
    }
	
	.mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
	
	#slider {
		height: 20px;
		margin: 0 auto 30px;
		width: 500px;
	
	#beginYear span {
	  color:white;
	}
	
	#beginSpan {
	  font-size: 12px;
	  font-weight: bold;
	}
	
	#endYear span {
	  color:white;
	}
	
	#endSpan {
	  font-size: 12px;
	  font-weight: bold;
	}
	
</style>
	
</head>





<body>		

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v0.1.0/mapbox-gl-geocoder.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v0.1.0/mapbox-gl-geocoder.css' type='text/css' />

<div id='map'></div>

<!-- changing basemap -->	

<div id='sidebar' class='sidebar' style="display: none;">
	<button class="btn btn-primary" title="Sivupalkki" onClick="toggleControlPanel()" href="#toggle">Hide menu</button>
	
		<div style="text-align: left; margin-left:1%;">
		<input id='basic' type='radio' name='rtoggle' value='basic' checked='checked'>
		<label for='basic'>basic</label>
		<input id='streets' type='radio' name='rtoggle' value='streets'>
		<label for='streets'>streets</label>
		<input id='emerald' type='radio' name='rtoggle' value='emerald'>
		<label for='emerald'>emerald</label>
		<input id='bright' type='radio' name='rtoggle' value='bright'>
		<label for='bright'>bright</label>
		<input id='light' type='radio' name='rtoggle' value='light'>
		<label for='light'>light</label>
		<input id='dark' type='radio' name='rtoggle' value='dark'>
		<label for='dark'>dark</label>
		<input id='satellite' type='radio' name='rtoggle' value='satellite'>
		<label for='satellite'>satellite</label>
		</div>

	<nav id="menu"></nav>		
</div>

	
	
<!-- Header -->
    <div class="container-fluid">
		<div id="header">
			<h1><span>Helsinki Building years</span></h1>
       
		<div class="ol-toggle-options">  
		<button class="btn btn-primary" title="Sivupalkki" onClick="toggleControlPanel()" href="#toggle">Menu</button>   
        </div>
        
		<div id="slider">

        </div>
        
		<div>

        </div>
        
		<div style="height:20px;">

        
		</div>
	</div>	
	
	
	
<script>
	/*	mapboxgl.accessToken = 'pk.eyJ1IjoiZ2FicmllbGFhZGFtY3p5ayIsImEiOiJjaWpldzV6ZncwMDA1dnhtNG56OGdhc2FvIn0.jW6mw1QLlMkBLgpAH0NXqA';
		var map = new mapboxgl.Map({
			container: 'map', // container id
			style: 'mapbox://styles/gabrielaadamczyk/ciju9xk8100ggbmkvduy8nqgs', //hosted style id
			center: [25.1, 60.25], // starting position - ZMIENIĆ
			zoom: 8 // starting zoom
		});*/
		
	
	mapboxgl.accessToken = 'pk.eyJ1IjoiZ2FicmllbGFhZGFtY3p5ayIsImEiOiJjaWpldzV6ZncwMDA1dnhtNG56OGdhc2FvIn0.jW6mw1QLlMkBLgpAH0NXqA';
	var map = new mapboxgl.Map({
	    container: 'map',
	    style: 'mapbox://styles/mapbox/streets-v8',
	    zoom: 15,
	    center: [25.1, 60.25]
	});

		var layerList = document.getElementById('sidebar');
		var inputs = layerList.getElementsByTagName('input');

		function switchLayer(layer) {
			var layerId = layer.target.id;
			map.setStyle('mapbox://styles/mapbox/' + layerId + '-v8');
		}
		
		for (var i = 0; i < inputs.length; i++) {
			inputs[i].onclick = switchLayer;
		}
		
<!-- Hiding the side panel -->		
		function toggleControlPanel(){
        var sidebar = document.getElementById("sidebar");
        if (sidebar.style.display == "none") {
          sidebar.style.display = "block";
        }
        else {
          sidebar.style.display = "none";
        }
		}
		
<!-- Adding layer -->
		map.on('style.load', function () {
			map.addSource('buildings', {
				type: 'vector',
				url: 'mapbox://gabrielaadamczyk.dui0bi44'
			});
			map.addLayer({
				'id': 'buildings',
				"interactive": true,
				'type': 'fill',
				'source': 'buildings',
				'paint': {
					"fill-color": "#d44242"
				},
				'source-layer': 'buildings'
			});

		});
		
		addLayer('Buildings', 'buildings');
	//	addLayer('Roads', 'roads');
	  
	  /*	var building = L.mapbox.tileLayer('gabrielaadamczyk.dui0bi44.buildings');
		// add that layer to a map
		building.addTo(map);
		// remove that layer from a map
		//map.removeLayer(carsLayer); */
	  
		function addLayer(name, id) {
			var link = document.createElement('a');
			link.href = '#';
			link.className = 'active';
			link.textContent = name;

			link.onclick = function (e) {
				e.preventDefault();
				e.stopPropagation();

				var visibility = map.getLayoutProperty(id, 'visibility');

				if (visibility === 'visible') {
					map.setLayoutProperty(id, 'visibility', 'none');
					this.className = '';
				} else {
					this.className = 'active';
					map.setLayoutProperty(id, 'visibility', 'visible');
				}
			};

			var layers = document.getElementById('menu');
			layers.appendChild(link);
		}
		
//Popup - nie działa!! ?
		var popup = new mapboxgl.Popup({
			closeButton: false,
			closeOnClick: false
		});
		
		
		map.on('mousemove', function(e) {
			map.featuresAt(e.point, {
				radius: 7.5, // Half the marker size (15px).
				includeGeometry: true,
				layer: 'buildings'
			}, function(err, features) {
				// Change the cursor style as a UI indicator.
				map.getCanvas().style.cursor = (!err && features.length) ? 'pointer' : '';

				if (err || !features.length) {
					popup.remove();
					return;
				}

				var feature = features[0];

				// Initialize a popup and set its coordinates
				// based on the feature found.
				popup.setLngLat(feature.geometry.coordinates)
					.setHTML(feature.properties.Facade)
					.addTo(map);
			});
		});
		
		
	  
// Add zoom and rotation controls to the map.
		map.addControl(new mapboxgl.Navigation());		
		
// Get coordinates of the mouse pointer	- NIE DZIAŁA!! ?
		map.on('mousemove', function (e) {
			document.getElementById('info').innerHTML =
				// e.point is the x, y coordinates of the mousemove event relative
				// to the top-left corner of the map
				JSON.stringify(e.point) + '<br />' +
					// e.lngLat is the longitude, latitude geographical position of the event
				JSON.stringify(e.lngLat);
		});
			
			
		map.addControl(new mapboxgl.Geocoder());
		
		
		
		

</script>

	
	
	

	
		
	
		




		
		
		
<!--nouslider-->	
<script src="nouislider.min.js"></script>		
		
</body>
</html>
